#include <iostream>
#include <fstream>
#include <string>

using namespace std;

// Función para determinar la dirección de la orden (L o R)
char obtener_direccion(string orden)
{
    return orden[0];
}

// Función para extraer el número de pasos del giro de la orden
int obtener_giro(string orden)
{
    int giro = 0;
    if (orden[0] != 'R' && orden[0] != 'L')
    {
        throw runtime_error("Orden invalida");
    }
    string entero = orden.substr(1);
    try
    {
        giro = stoi(entero);
        return giro;
    }
    catch (const invalid_argument &e)
    {
        throw runtime_error("Orden invalida: No se pudo convertir el giro a un número");
    }
}

// Función para simular la rotación y devolver la nueva posición
int girar(int giro, int posicion, char dir)
{
    if (dir == 'R')
    {
        posicion += giro;
    }
    else if (dir == 'L')
    {
        posicion -= giro;
    }
    posicion = (posicion % 100 + 100) % 100; // Asegura que la rotación sea circular
    return posicion;
}

// Función para contar cuántas veces el dial pasa por el 0 durante la rotación
int contar_pasos_por_0(int giro, int posicion, char dir)
{
    int contador_0 = 0;
    
    // Realizamos la rotación paso a paso
    for (int i = 0; i < giro; i++)
    {
        if (dir == 'R')
        {
            posicion = (posicion + 1) % 100; // Rotación a la derecha
        }
        else if (dir == 'L')
        {
            posicion = (posicion - 1 + 100) % 100; // Rotación a la izquierda
        }

        // Si la posición es 0, incrementamos el contador
        if (posicion == 0)
        {
            contador_0++;
        }
    }

    return contador_0;
}

int main()
{
    string orden;
    int posicion = 50; // Empezamos en la posición 50
    int contraseña = 0;
    int contador_0 = 0;

    // Abrimos el archivo con las órdenes
    ifstream archivo("ordenes.txt"); // 
    if (!archivo.is_open())
    {
        cout << "No se pudo abrir el archivo." << endl;
        return 1;
    }

    // Leemos cada línea del archivo y procesamos la rotación
    while (getline(archivo, orden))
    {
        char dir = obtener_direccion(orden); // Obtenemos la dirección (L o R)
        int giro = obtener_giro(orden); // Obtenemos el número de pasos para la rotación

        // Contamos cuántas veces pasamos por el 0 durante la rotación
        contador_0 += contar_pasos_por_0(giro, posicion, dir);

        // Realizamos la rotación y actualizamos la posición actual
        posicion = girar(giro, posicion, dir);

        // Si la posición final es 0, incrementamos la contraseña
        if (posicion == 0)
        {
            contraseña++;
        }
    }

    archivo.close(); // Cerramos el arch
