#include <iostream>
#include <fstream>
#include <string>
#include <vector>

using namespace std;

// Cuenta cuantos '@' hay en las 8 posiciones adyacentes 
int contar_vecinos(const vector<string> &grid, int r, int c) {
    int filas = grid.size();
    int col  = grid[0].size();
    int cuenta = 0;

    for (int dr = -1; dr <= 1; ++dr) {
        for (int dc = -1; dc <= 1; ++dc) {
            if (dr == 0 && dc == 0) continue;  // saltar la propia celda

            int nr = r + dr;
            int nc = c + dc;

            if (nr >= 0 && nr < filas && nc >= 0 && nc < col) {
                if (grid[nr][nc] == '@') {
                    ++cuenta;
                }
            }
        }
    }
    return cuenta;
}

int main() {
    
    ifstream archivo("rollopapel.txt");
    if (!archivo.is_open()) {
        cout << "No se pudo abrir rollopapel.txt\n";
        return 1;
    }

    vector<string> grid;
    string linea;

    // Leemos todas las lineas del archivo
    while (getline(archivo, linea)) {
        if (!linea.empty()) {      // ignoramos lineas vacias por si acaso
            grid.push_back(linea);
        }
    }
    archivo.close();

    if (grid.empty()) {
        cout << "El archivo esta vacio.\n";
        return 1;
    }

    int filas = grid.size();
    int col  = grid[0].size();
    int accesibles = 0;

    for (int r = 0; r < filas; ++r) {
        for (int c = 0; c < col; ++c) {
            if (grid[r][c] == '@') {
                int vecinos = contar_vecinos(grid, r, c);
                if (vecinos < 4) {   
                    ++accesibles;
                }
            }
        }
    }

    cout << accesibles << endl;
    return 0;
}
