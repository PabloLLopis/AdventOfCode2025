#include <iostream>
#include <string>
#include <fstream>
#include <stdexcept>

using namespace std;

char obtener_direccion(const string& orden)
{
    return orden[0];
}

int obtener_giro(const string& orden)
{
    if (orden.empty() || (orden[0] != 'R' && orden[0] != 'L'))
    {
        throw runtime_error("Orden invalida");
    }

    string entero = orden.substr(1);
    try
    {
        return stoi(entero);
    }
    catch (const invalid_argument& e)
    {
        throw runtime_error("Orden invalida: No se pudo convertir el giro a un número");
    }
}

/**
 * Simula la rotación click a click.
 * - Actualiza la posición (por referencia).
 * - Devuelve cuántas veces la posición ha sido 0 durante esta instrucción
 *   (incluyendo si el último click deja el dial en 0).
 */
int contar_pasos_por_0(int giro, int& posicion, char dir)
{
    int contador_0 = 0;
    int step = (dir == 'R') ? 1 : -1;

    for (int i = 0; i < giro; ++i)
    {
        posicion = (posicion + step + 100) % 100; // un click
        if (posicion == 0)
        {
            contador_0++;
        }
    }

    return contador_0;
}

int main()
{
    string orden;
    int posicion = 50;        // posición inicial del dial
    long long parte1 = 0;     // veces que la posición final de una instrucción es 0
    long long parte2 = 0;     // veces que el dial está en 0 tras cualquier click

    ifstream archivo("ordenes.txt");
    if (!archivo.is_open())
    {
        cout << "No se pudo abrir el archivo." << endl;
        return 1;
    }

    while (getline(archivo, orden))
    {
        if (orden.empty()) continue;

        char dir = obtener_direccion(orden);
        int giro = obtener_giro(orden);

        // Parte 2: contamos todos los clicks que quedan en 0
        parte2 += contar_pasos_por_0(giro, posicion, dir);

        // Parte 1: si al final de la instrucción estamos en 0, sumamos
        if (posicion == 0)
        {
            parte1++;
        }

        // Si quieres debug:
        // cout << "Orden: " << orden << " -> Posicion: " << posicion << "\n";
    }

    archivo.close();

    cout << "Parte 1 - Veces que termina en 0: " << parte1 << endl;
    cout << "Parte 2 - Veces que el dial apunta a 0 en cualquier click: " << parte2 << endl;

    return 0;
}
